<script>
/*
https://leetcode-cn.com/problems/first-bad-version/description/
*/

function isBadVersion(version){
	if (version >= 4) {
		return true
	}

	return false
}

function solution(n) {

	if (n == 1) {
		return n
	}

	var start = 1
	var end = n

	var lowestBadVersion = 0
	while((end - start) > 1){
		mid = start + Math.floor((end - start) / 2)
		if (isBadVersion(mid)) {
			end = mid
			lowestBadVersion = mid
		} else {
			start = mid
		}
	}
	if (lowestBadVersion != 0) {
		if (isBadVersion(end) && end < lowestBadVersion) {
			lowestBadVersion = end
		}
		if (isBadVersion(start) && start < lowestBadVersion) {
			lowestBadVersion = start
		}	
	} else {
		if (isBadVersion(end)) {
			lowestBadVersion = end
		}
		if (isBadVersion(start)) {
			lowestBadVersion = start
		}
	}

	return lowestBadVersion
}

console.log(solution(5))

</script>